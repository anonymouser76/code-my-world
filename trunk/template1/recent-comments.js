function replaceVars(e,t,n,r){e=e.replace("[user]",t);e=e.replace("[date]",r.toLocaleDateString());e=e.replace("[datetime]",r.toLocaleString());e=e.replace("[time]",r.toLocaleTimeString());e=e.replace("[title]",n.replace(/\"/g,"&quot;"));var i=e.indexOf("[date ");if(i>-1){var s=/\[date\s+(.+?)\]/.exec(e)[1];if(s!=""){var o=s.replace(/yyyy/i,r.getFullYear());o=o.replace(/yy/i,r.getFullYear().toString().slice(-2));o=o.replace("MM",String("0"+(r.getMonth()+1)).slice(-2));o=o.replace("mm",String("0"+r.getMinutes()).slice(-2));o=o.replace("ss",String("0"+r.getSeconds()).slice(-2));o=o.replace("dd",String("0"+r.getDate()).slice(-2));o=o.replace("hh",String("0"+r.getHours()).slice(-2));e=e.replace(/\[date\s+(.+?)\]/,o)}}return e}function getPostUrlsForComments(e){for(var t=0;t<e.feed.entry.length;t++){var n=e.feed.entry[t];for(var r=0;r<n.link.length;r++){if(n.link[r].rel=="alternate"){href=n.link[r].href;break}}urlToTitle[href]=n.title.$t}}function showRecentComments(e){var t={};var n=0;if(numPerPost){while(numPerPost<numRecentComments){for(var r=0;r<e.feed.entry.length;r++){var i=e.feed.entry[r];if(i.author[0].name.$t=="blockthisusername")continue;if(i["thr$in-reply-to"]){if(!t[i["thr$in-reply-to"].href])t[i["thr$in-reply-to"].href]=1;else t[i["thr$in-reply-to"].href]++;if(t[i["thr$in-reply-to"].href]<=numPerPost)n++}}if(n>=numRecentComments)break;numPerPost++;n=0;t={}}if(numRecentComments==numPerPost)numPerPost=0}t={};n=0;for(var r=0;n<numRecentComments&&r<e.feed.entry.length;r++){var i=e.feed.entry[r];if(i.author[0].name.$t=="blockthisusername")continue;if(numPerPost&&t[i["thr$in-reply-to"].href]&&t[i["thr$in-reply-to"].href]>=numPerPost)continue;if(i["thr$in-reply-to"]){if(!t[i["thr$in-reply-to"].href])t[i["thr$in-reply-to"].href]=1;else t[i["thr$in-reply-to"].href]++;n++;var s="";for(var o=0;o<i.link.length;o++){if(i.link[o].rel=="alternate"){s=i.link[o].href;break}}if(s==""){n--;continue}var u=s.split("?")[0];var a="";if("content"in i)a=i.content.$t;else a=i.summary.$t;a=a.replace(/<br[^>]*>/ig," ");a=a.replace(/<\S[^>]*>/g,"");var f="-";if(urlToTitle[u])f=urlToTitle[u];else{if(u.match(/\/([^/]*)\.html/))f=u.match(/\/([^/]*)\.html/)[1].replace(/_\d{2}$/,"");f=f.replace(/-/g," ");f=f[0].toUpperCase()+f.slice(1)}if(maxPostTitleChars&&f.length>maxPostTitleChars){f=f.substring(0,maxPostTitleChars);var l=f.lastIndexOf(" ");f=f.substring(0,l)+"..."}var c=i.author[0].name.$t;var h="";if(i.author[0].uri&&i.author[0].uri.$t!="")h=i.author[0].uri.$t;var p=urlAnoAvatar;var d="http://www.blogger.com/profile/";if(trueAvatars&&i.author[0].gd$image&&i.author[0].gd$image.src&&h.substr(0,d.length)==d)p=i.author[0].gd$image.src;else{var v=document.createElement("a");if(h!=""){v.href=h;p="http://www.google.com/s2/favicons?domain="+v.hostname}}if(urlMyProfile!=""&&h==urlMyProfile&&urlMyAvatar!="")p=urlMyAvatar;if(p=="http://img2.blogblog.com/img/b16-rounded.gif"&&urlNoAvatar!="")p=urlNoAvatar;var m="s"+sizeAvatar;p=p.replace(/\/s\d\d+-c\//,"/"+m+"-c/");if(cropAvatar)m+="-c";p=p.replace(/\/s\d\d+(-c){0,1}\//,"/"+m+"/");if(c=="Anonymous"&&txtAnonymous!=""&&p==urlAnoAvatar)c=txtAnonymous;var g='<img height="'+sizeAvatar+'" width="'+sizeAvatar+'" title="'+c+'" src="'+p+'" />';if(h!="")g='<a href="'+h+'">'+g+"</a>";var y="";if(urlMyProfile!=""&&h==urlMyProfile)y=" rc-admin";var b=i.published.$t.match(/\d+/g);var w=new Date(b[0],b[1]-1,b[2],b[3],b[4],b[5]);var E=txtWrote;if(txtWrote.indexOf("[")==-1)E=c+" "+txtWrote;else E=replaceVars(E,c,f,w);var S=replaceVars(txtTooltip,c,f,w);if(!/#/.test(s))s+="#comments";document.write('<div title="'+S+'" class="rc'+y+'">');document.write('<div title="'+S+'" class="rc-header'+y+'"><div title="'+S+'" class="rc-ico'+y+'">'+g+'</div><a title="'+S+'" href="'+s+'">'+E+" </a></div>");if(a.length<maxCommentChars)document.write('<div title="'+S+'" class="rc-body'+y+'">'+a+"</div>");else{a=a.substring(0,maxCommentChars);var l=a.lastIndexOf(" ");a=a.substring(0,l);document.write('<div title="'+S+'" class="rc-body'+y+'">'+a+"...</div>");if(txtMore!=""){var x=replaceVars(txtMore,c,f,w);document.write('<div title="'+S+'" class="rc-footer'+y+'"><a title="'+S+'" href="'+s+'">'+x+"</a></div>")}}document.write('<div style="clear:both;"></div></div>')}}}var numRecentComments=5;var maxCommentChars=77;var trueAvatars=true;var urlMyAvatar="";var urlMyProfile="";var cropAvatar=true;var sizeAvatar=40;var urlNoAvatar="http://2.bp.blogspot.com/-GfFjD8etS2E/UTPve4mQdYI/AAAAAAAAC7k/gy0DVRlx4xM/s"+sizeAvatar+"/anonymous-Icon.jpg";var urlAnoAvatar="http://www.gravatar.com/avatar/00000000000000000000000000000000?d=mm&s="+sizeAvatar;var txtMore="";var txtWrote="said:";var txtAnonymous="";var maxResultsComments="";var numPerPost=2;var maxPostTitleChars=40;var getTitles=true;var maxResultsPosts="";var txtTooltip="[user] on &quot;[title]&quot; - [date MM-dd-yyyy hh:mm]";var urlToTitle={};if(urlMyProfile==""){var elements=document.getElementsByTagName("*");var expr=/(^| )profile-link( |$)/;for(var i=0;i<elements.length;i++)if(expr.test(elements[i].className)){urlMyProfile=elements[i].href;break}}if(getTitles)document.write('<script type="text/javascript" src="http://'+window.location.hostname+"/feeds/posts/summary?redirect=false"+maxResultsPosts+'&alt=json-in-script&callback=getPostUrlsForComments"></'+"script>");document.write('<script type="text/javascript" src="http://'+window.location.hostname+"/feeds/comments/default?redirect=false"+maxResultsComments+'&alt=json-in-script&callback=showRecentComments"></'+"script>")